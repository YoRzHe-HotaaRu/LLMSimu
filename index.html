<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Interactive LLM Neural Network Simulation - Visualize how AI thinks from input to output">
    <title>LLM Neural Network Simulation</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/layers.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/network.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" stroke="url(#gradient)" stroke-width="2" />
                            <circle cx="12" cy="15" r="3" fill="#00f5ff" />
                            <circle cx="28" cy="15" r="3" fill="#ff00ff" />
                            <circle cx="20" cy="28" r="3" fill="#00ff88" />
                            <line x1="12" y1="15" x2="28" y2="15" stroke="#00f5ff" stroke-width="1" opacity="0.5" />
                            <line x1="12" y1="15" x2="20" y2="28" stroke="#00ff88" stroke-width="1" opacity="0.5" />
                            <line x1="28" y1="15" x2="20" y2="28" stroke="#ff00ff" stroke-width="1" opacity="0.5" />
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                                    <stop offset="0%" stop-color="#00f5ff" />
                                    <stop offset="100%" stop-color="#ff00ff" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <h1>LLM Neural Simulation</h1>
                </div>
                <div class="controls">
                    <button id="speed-slow" class="speed-btn" title="Slow">0.5x</button>
                    <button id="speed-normal" class="speed-btn active" title="Normal">1x</button>
                    <button id="speed-fast" class="speed-btn" title="Fast">2x</button>
                    <button id="reset-btn" class="control-btn" title="Reset">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                            <path d="M3 3v5h5" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <div class="section-header">
                    <span class="section-icon">üìù</span>
                    <h2>Input</h2>
                </div>
                <div class="input-container">
                    <textarea id="user-input" placeholder="Enter your prompt here..."
                        rows="3">What is the meaning of life?</textarea>
                    <button id="submit-btn" class="submit-btn">
                        <span>Process</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </section>

            <!-- View Tabs -->
            <div class="view-tabs">
                <button class="view-tab active" data-view="layers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="4" rx="1" />
                        <rect x="3" y="10" width="18" height="4" rx="1" />
                        <rect x="3" y="17" width="18" height="4" rx="1" />
                    </svg>
                    Layer View
                </button>
                <button class="view-tab" data-view="network">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="5" cy="6" r="2" />
                        <circle cx="5" cy="12" r="2" />
                        <circle cx="5" cy="18" r="2" />
                        <circle cx="12" cy="9" r="2" />
                        <circle cx="12" cy="15" r="2" />
                        <circle cx="19" cy="12" r="2" />
                        <line x1="7" y1="6" x2="10" y2="9" />
                        <line x1="7" y1="12" x2="10" y2="9" />
                        <line x1="7" y1="12" x2="10" y2="15" />
                        <line x1="7" y1="18" x2="10" y2="15" />
                        <line x1="14" y1="9" x2="17" y2="12" />
                        <line x1="14" y1="15" x2="17" y2="12" />
                    </svg>
                    Network View
                </button>
            </div>

            <!-- Neural Network Visualization - Layer View -->
            <section class="neural-network view-content active" id="layers-view">
                <!-- Layer 1: Tokenization -->
                <div class="layer" id="layer-tokenization">
                    <div class="layer-header">
                        <div class="layer-number">1</div>
                        <div class="layer-info">
                            <h3>Tokenization</h3>
                            <p>Breaking text into tokens</p>
                        </div>
                        <div class="layer-status" id="status-tokenization">Waiting</div>
                    </div>
                    <div class="layer-content">
                        <div class="tokens-container" id="tokens-input"></div>
                    </div>
                </div>

                <!-- Layer 2: Embeddings -->
                <div class="layer" id="layer-embeddings">
                    <div class="layer-header">
                        <div class="layer-number">2</div>
                        <div class="layer-info">
                            <h3>Embeddings</h3>
                            <p>Converting tokens to vectors</p>
                        </div>
                        <div class="layer-status" id="status-embeddings">Waiting</div>
                    </div>
                    <div class="layer-content">
                        <div class="embeddings-container" id="embeddings-display"></div>
                    </div>
                </div>

                <!-- Layer 3: Attention -->
                <div class="layer" id="layer-attention">
                    <div class="layer-header">
                        <div class="layer-number">3</div>
                        <div class="layer-info">
                            <h3>Self-Attention</h3>
                            <p>Computing attention weights</p>
                        </div>
                        <div class="layer-status" id="status-attention">Waiting</div>
                    </div>
                    <div class="layer-content">
                        <div class="attention-container" id="attention-display">
                            <canvas id="attention-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Layer 4: Feed-Forward Network -->
                <div class="layer" id="layer-ffn">
                    <div class="layer-header">
                        <div class="layer-number">4</div>
                        <div class="layer-info">
                            <h3>Feed-Forward Network</h3>
                            <p>Processing through neural layers</p>
                        </div>
                        <div class="layer-status" id="status-ffn">Waiting</div>
                    </div>
                    <div class="layer-content">
                        <div class="ffn-container" id="ffn-display"></div>
                    </div>
                </div>

                <!-- Layer 5: Output Generation -->
                <div class="layer" id="layer-output">
                    <div class="layer-header">
                        <div class="layer-number">5</div>
                        <div class="layer-info">
                            <h3>Output Generation</h3>
                            <p>Generating response tokens</p>
                        </div>
                        <div class="layer-status" id="status-output">Waiting</div>
                    </div>
                    <div class="layer-content">
                        <div class="output-probs-container" id="output-probs"></div>
                    </div>
                </div>
            </section>

            <!-- Neural Network Visualization - Network Diagram View -->
            <section class="network-diagram view-content" id="network-view">
                <div class="network-container">
                    <svg id="network-svg" viewBox="0 0 900 500" preserveAspectRatio="xMidYMid meet">
                        <!-- Connections will be drawn here by JS -->
                        <g id="network-connections"></g>
                        <!-- Nodes will be drawn here by JS -->
                        <g id="network-nodes"></g>
                        <!-- Data particles will animate here -->
                        <g id="network-particles"></g>
                    </svg>
                    <div class="network-labels">
                        <div class="network-label" style="left: 5%;">Input<br><small>Tokens</small></div>
                        <div class="network-label" style="left: 22%;">Embedding<br><small>Layer</small></div>
                        <div class="network-label" style="left: 39%;">Hidden<br><small>Layer 1</small></div>
                        <div class="network-label" style="left: 56%;">Hidden<br><small>Layer 2</small></div>
                        <div class="network-label" style="left: 73%;">Hidden<br><small>Layer 3</small></div>
                        <div class="network-label" style="left: 90%;">Output<br><small>Tokens</small></div>
                    </div>
                    <div class="network-status">
                        <span id="network-status-text">Ready</span>
                        <div class="network-progress">
                            <div class="network-progress-bar" id="network-progress-bar"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Response Section -->
            <section class="response-section">
                <div class="section-header">
                    <span class="section-icon">ü§ñ</span>
                    <h2>Response</h2>
                </div>
                <div class="response-container">
                    <div id="response-output" class="response-text"></div>
                    <div id="response-cursor" class="cursor"></div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by <strong>ZenMux API</strong> ‚Ä¢ Model: <code>xiaomi/mimo-v2-flash</code></p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/tokenizer.js"></script>
    <script src="js/embeddings.js"></script>
    <script src="js/attention.js"></script>
    <script src="js/ffn.js"></script>
    <script src="js/output.js"></script>
    <script src="js/network.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>

</html>